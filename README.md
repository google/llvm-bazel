# LLVM Bazel BUILD files

DISCLAIMER: This is not an officially-supported Google project and has been
superseded by the Bazel build configuration in the
[LLVM Project monorepo](https://github.com/llvm/llvm-project/tree/main/utils/bazel).

This repo contains standalone Bazel BUILD configuration for part of the
[LLVM project](http://llvm.org/) that could be shared by dependent projects
using the Bazel build system.

It is similar to the BUILD files for
[LLVM](https://github.com/tensorflow/tensorflow/blob/master/third_party/llvm/llvm.autogenerated.BUILD)
and [MLIR](https://github.com/tensorflow/tensorflow/blob/master/third_party/mlir/BUILD)
in the [TensorFlow](http://tensorflow.org) project, but aims to be
suitable for more general usage.

# Status

This build configuration has now been migrated upstream to the LLVM monorepo, in
a [side directory](https://github.com/llvm/llvm-project/tree/main/utils/bazel).
This is following the
[upstreaming proposal](https://github.com/llvm/llvm-www/blob/main/proposals/LP0002-BazelBuildConfiguration.md).
Therefore this repository is no longer actively updated. Please prefer the
upstream build files which will see regular maintenance. Transitioning to those
should be straightforward and you can find usage examples there. We will
continue to accept PRs updating this repository until projects have time to
migrate, but will not be updating it ourselves.

# Usage

These build files are flexible in how they can be used. The
[llvm-bazel subdirectory](./llvm-bazel) has the simplest build configuration
with a submodule for the llvm-project. The WORKSPACE is in that directory, so
you can build the project like:

```shell
cd llvm-bazel/
bazel build --config=generic_clang @llvm-project//...
```

Users are more likely going to want to fetch build files from this repository
and use them with their own copy of the llvm-project.

The
[http-archive-demo branch](https://github.com/google/llvm-bazel/tree/http-archive-demo/http-archive-demo)
shows a build based on
[http_archive](https://docs.bazel.build/versions/master/repo/http.html#http_archive).

The
[submodule-demo branch](https://github.com/google/llvm-bazel/tree/submodule-demo/submodule-demo)
shows usage of these build files with both them and llvm-project coming from
submodules.

You can build either of these demos after changing into the respective directory
with a command like

```shell
bazel build --config=generic_clang @llvm-project//...
```

# License
Licensed under the Apache license with LLVM Exceptions. See [LICENSE](LICENSE)
for more information.
